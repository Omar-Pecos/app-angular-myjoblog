<div  class="cargando text-center" *ngIf="journeys == undefined">
  <img src="https://acegif.com/wp-content/uploads/loading-9.gif">
</div>

<div class="contenido" *ngIf="journeys != undefined">
	<h2>{{title}}</h2>
<div class="container">
	<div class="buscador row justify-content-center">
		<h3>Buscador</h3>
		<select id="selectsearch" (change)="viewSearchSelect()" class="form-control" ng-model="searchselect">
			<option value="date" selected>Fecha</option>
			<option value="time">Hora</option>
		</select>

			<select *ngIf="searchselect == 'time'" class="form-control" id="selecttipohora">
						<option value="initial_time" selected>Hora inicial</option>
						<option value="final_time">Hora final</option>
			</select>

			<span *ngIf="searchselect == 'date'" id="spanbuscadorfecha">
					<input id="diasinput" class="form-control" type="number" placeholder="DD">
						<b>/</b>
					<input id="mesinput" class="form-control" type="number" placeholder="MM">
						<b>/</b>
					<input id="anioinput" class="form-control" type="number" placeholder="AAAA">
			</span>
			<span *ngIf="searchselect == 'time'" id="spanbuscadorhora">
					<input id="horasinput" class="form-control" type="number" placeholder="HH">
							&nbsp;&nbsp;<b>:</b>&nbsp;&nbsp;
					<input id="minutosinput" class="form-control" type="number" placeholder="MM">
						
			</span>
						
			<br>
		<input (click)="addgetParams('','search')" data-toggle="modal" data-target="#appendurlModal" type="button" value="Buscar" class="btn btn-success">
	</div>
</div>
		 <div style="overflow-x:auto;">
			<table class="table table-light table-hover responsive">
				<tr class="cabecera-tabla">
					<th [ngStyle]="{'background-color':sort_by === 'date' ? '#F39C12' : ''}" 
					(click)="addgetParams('sort_by=date&order='+order,'add')">
						Fecha
							<span *ngIf="sort_by == 'date'">({{ order_now | uppercase }})</span>
							<img *ngIf="order == 'desc'" src="https://img.icons8.com/metro/26/000000/down--v2.png">
							<img *ngIf="order == 'asc'" src="https://img.icons8.com/metro/26/000000/up--v2.png">
					</th>
					<th>Firma</th>
					<th [ngStyle]="{'background-color':sort_by === 'time' ? '#F39C12' : ''}" 
					(click)="addgetParams('sort_by=time&order='+order,'add')">
						Duración (s)
							<span *ngIf="sort_by == 'time'">({{ order_now | uppercase }})</span>
							<img *ngIf="order == 'desc'" src="https://img.icons8.com/metro/26/000000/down--v2.png">
							<img *ngIf="order == 'asc'" src="https://img.icons8.com/metro/26/000000/up--v2.png">
					</th>
					<th [ngStyle]="{'background-color':sort_by === 'initial_time' ? '#F39C12' : ''}" 
					(click)="addgetParams('sort_by=initial_time&order='+order,'add')">
						Inicio
							<span *ngIf="sort_by == 'initial_time'">({{ order_now | uppercase }})</span>
							<img *ngIf="order == 'desc'" src="https://img.icons8.com/metro/26/000000/down--v2.png">
							<img *ngIf="order == 'asc'" src="https://img.icons8.com/metro/26/000000/up--v2.png">
					</th>
					<th [ngStyle]="{'background-color':sort_by === 'final_time' ? '#F39C12' : ''}" 
					(click)="addgetParams('sort_by=final_time&order='+order,'add')">
						Final
							<span *ngIf="sort_by == 'final_time'">({{ order_now | uppercase }})</span>
							<img *ngIf="order == 'desc'" src="https://img.icons8.com/metro/26/000000/down--v2.png">
							<img *ngIf="order == 'asc'" src="https://img.icons8.com/metro/26/000000/up--v2.png">
					</th>
					
					<!-- <th>User #</th> si es admin pues operaciones -->
				</tr>
				<tr class="filadatos" *ngFor="let jornada of journeys">
					<td>{{jornada.date}}</td>
					<td>
						<img class="firmas" width="100" src="{{url}}/storage/images/{{jornada.signature}}"/>
					</td>
					<td>{{jornada.time}}</td>
					<td>{{jornada.initial_time}}</td>
					<td>{{jornada.final_time}}</td>
					
				</tr>
			</table>
		 </div>

 <!-- PAGINACIÓN -->
 <div class="row justify-content-center align-items-center paginacion">
 	<button class="botonpaginas" [disabled]="pageInfo.previous == null" (click)="addgetParams(pageInfo.previous,'slice')">
 		<img width="50" src="https://img.icons8.com/flat_round/64/000000/arrow-left.png">
 	</button>
 	<span id="numpag"><b>{{pageInfo.page}} de {{pageInfo.lastpage}}</b></span>
 	<button class="botonpaginas" [disabled]="pageInfo.next == null" (click)="addgetParams(pageInfo.next,'slice')">
 		<img width="50" src="https://img.icons8.com/flat_round/64/000000/arrow-right.png">
 	</button>
</div>
	<p class="text-center"> <b >Mostrando {{pageInfo.from}}-{{pageInfo.to}} de {{pageInfo.total}} totales</b></p>
</div>


<!-- MODAL DE APPENDGETURLPARAMS -->
	<div class="modal fade" id="appendurlModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
	  <div class="modal-dialog" role="document">
	    <div class="modal-content">
	      <div class="modal-header">
	        <h5 class="modal-title" id="exampleModalLabel">¿Desea además filtrar los resultados?</h5>
	        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
	          <span aria-hidden="true">&times;</span>
	        </button>
	      </div>
	      <div class="modal-body">

	      		<h3>Filtrar por : </h3>
	      		<label>Campo
		       		<select id="selectfield" class="form-control">
						<option value="id" selected>ID</option>
						<option value="date" >Fecha</option>
						<option value="time">Duración</option>
						<option value="initial_time">Hora inicial</option>
						<option value="final_time">Hora final</option>
					</select>
				</label>
				<label>Orden
					<select id="selectorder" class="form-control">
						<option value="asc" >Ascendente</option>
						<option value="desc" selected>Descendente</option>
					</select>
				</label>	
				&nbsp;&nbsp;&nbsp;
				<button (click)="addgetParams('','sorted_search')" type="button" class="btn btn-primary" data-dismiss="modal">
					<img src="https://img.icons8.com/color/48/000000/opera-glasses.png">&nbsp;&nbsp;Búsqueda Filtrada
				</button>
				
	      </div>
	      <div class="modal-footer">
	        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
	        <button (click)="getJourneysofOne()" type="button" class="btn btn-primary" data-dismiss="modal">
	        	<img  width="30" src="https://img.icons8.com/color/48/000000/search.png">&nbsp;&nbsp;Búsqueda Normal
	    	</button>
	      </div>
	    </div>
  	  </div>
    </div>

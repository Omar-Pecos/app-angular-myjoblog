<!-- queda por hacer los exports un modelo y poder filtrarlo y tal con el ShowAll() -->
<div  class="cargando" *ngIf="loading">
  <img src="https://acegif.com/wp-content/uploads/loading-9.gif">
</div>

<div class="contenido" *ngIf="!loading">
  <!-- Infomsg -->
      <div *ngIf="infomsg != ''" class="alert alert-warning alert-dismissible fade show" role="alert">
        <strong>¡Antención!</strong> {{infomsg}}
        <button type="button" (click)="setinfomsg('')" class="close" data-dismiss="alert" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
    </div>

	<div class="titulo">
			<h2>{{title}}</h2>
	</div>
	<br>

  <div id="buscadores" class="container  text-center">
      <div class="buscador">
         <h3>Usuario x Año</h3>
        <h4>Usuarios</h4>
        <select class="form-control" [(ngModel)]="selecteduser">
            <option *ngFor="let user of ListUsers" value="{{user.id}}">{{user.name}}&nbsp;{{user.surname}}</option>
        </select>
        <h4>Año</h4>
        <input class="form-control" type="number" [(ngModel)]="year" value="{{year}}">
        <button class="btn btn-success" (click)="GenPdf('id')">Generar</button>
      </div> 

     <div class="buscador">
        <h3>Todos x Año</h3>
         <h4>Año</h4>
          <input class="form-control" type="number" [(ngModel)]="year" value="{{year}}">
        <button class="btn btn-success" (click)="GenPdf('all')">Generar</button>
      </div> 
  </div>

<!--<div id="accordion">
  <div class="card">
    <div class="card-header cardhometitulo" id="headingOne">
      <h5 class="mb-0">
        <button class="btn btn-success btn-block" data-toggle="collapse" data-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
         	<b>Ver PDF</b> 
        </button>
      </h5>
    </div>

    <div id="collapseOne" class="collapse show" aria-labelledby="headingOne" data-parent="#accordion">
      <div class="card-body cardentrarbody">
       	 	Visualiza el Pdf y descárgarlo en la localización deseada con un nombre personalizado
      </div>
    </div>
  </div>
  <div class="card">
    <div class="card-header cardhometitulo" id="headingTwo">
      <h5 class="mb-0">
        <button class="btn btn-success btn-block collapsed" data-toggle="collapse" data-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
          	<b>Descargar PDF</b> 
        </button>
      </h5>
    </div>
    <div id="collapseTwo" class="collapse" aria-labelledby="headingTwo" data-parent="#accordion">
      <div class="card-body cardentrarbody">
       		 Descarga directa con un nombre generado originalmente a su carpeta de descargas por defecto
      </div>
    </div>
  </div>
  <div class="card">
    <div class="card-header cardhometitulo" id="headingThree">
      <h5 class="mb-0">
        <button class="btn btn-success btn-block collapsed" data-toggle="collapse" data-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
          	<b>Eliminar PDF</b> 
        </button>
      </h5>
    </div>
    <div id="collapseThree" class="collapse" aria-labelledby="headingThree" data-parent="#accordion">
      <div class="card-body cardentrarbody">
	        Elimina el Pdf totalmente de la aplicación (***)
			<br><p style="color: red;">(***) Es recomendable haberlo descargado primero, así tú tendrás una copia del registro de jornadas semanales</p>
      </div>
    </div>
  </div>
</div> -->
	<br>
		<table class="table table-light table-hover responsive">
			<tr class="cabecera-tabla">

         
			  <th [ngStyle]="{'background-color':sort_by === 'id' ? '#F39C12' : ''}" 
          (click)="addgetParams('sort_by=id&order='+order,'add')">
            ID #
              <span *ngIf="sort_by == 'id'">({{ order_now | uppercase }})</span>
              <img *ngIf="order == 'desc'" src="https://img.icons8.com/metro/26/000000/down--v2.png">
              <img *ngIf="order == 'asc'" src="https://img.icons8.com/metro/26/000000/up--v2.png">
        </th>
				<th [ngStyle]="{'background-color':sort_by === 'datetime' ? '#F39C12' : ''}" 
          (click)="addgetParams('sort_by=datetime&order='+order,'add')">
            Fecha y Hora
              <span *ngIf="sort_by == 'datetime'">({{ order_now | uppercase }})</span>
              <img *ngIf="order == 'desc'" src="https://img.icons8.com/metro/26/000000/down--v2.png">
              <img *ngIf="order == 'asc'" src="https://img.icons8.com/metro/26/000000/up--v2.png">
          </th>
				 <th [ngStyle]="{'background-color':sort_by === 'namefile' ? '#F39C12' : ''}" (click)="addgetParams('sort_by=namefile&order='+order,'add')">
            Nombre
              <span *ngIf="sort_by == 'namefile'">({{ order_now | uppercase }})</span>
              <img *ngIf="order == 'desc'" src="https://img.icons8.com/metro/26/000000/down--v2.png">
              <img *ngIf="order == 'asc'" src="https://img.icons8.com/metro/26/000000/up--v2.png">
          </th>
				<th>Opciones</th>
			</tr>
			<tr *ngFor="let file of files" class="alert alert-info">
				<td>{{file.id}}</td>
				<td>{{file.datetime}}</td>
				<td>{{file.namefile}}</td>
				<td>
          <span class="operacionesUser">
    					<button class="btn btn-info" (click)="seePdf(file.namefile)"> 
    						<img src="https://img.icons8.com/color/48/000000/visible.png">&nbsp;Ver
    					</button>
    					<button class="btn btn-info" (click)="downloadPdf(file.namefile)">
    						<img src="https://img.icons8.com/color/48/000000/software-installer.png">&nbsp;Descargar
    					</button>
    					<button class="btn btn-warning" (click)="deletePdf(file.namefile)">
    						<img src="https://img.icons8.com/color/48/000000/delete-forever.png">&nbsp;Borrar 
    					</button>
          </span>
				</td>
			</tr>
		</table>
		

 <!-- PAGINACIÓN -->
 <div class="row justify-content-center align-items-center paginacion">
  <button class="botonpaginas" [disabled]="pageInfo.previous == null" (click)="addgetParams(pageInfo.previous,'slice')">
    <img width="50" src="https://img.icons8.com/flat_round/64/000000/arrow-left.png">
  </button>
  <span id="numpag"><b>{{pageInfo.page}} de {{pageInfo.lastpage}}</b></span>
  <button class="botonpaginas" [disabled]="pageInfo.next == null" (click)="addgetParams(pageInfo.next,'slice')">
    <img width="50" src="https://img.icons8.com/flat_round/64/000000/arrow-right.png">
  </button>
</div>
  <p class="text-center"> <b >Mostrando {{pageInfo.from}}-{{pageInfo.to}} de {{pageInfo.total}} totales</b></p>

</div>

